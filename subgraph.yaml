specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: NexusV1
    network: goerli
    source:
      address: "0xc97794e0c0a0bd6e4f9e08be3459eede87a38d72"
      abi: NexusV1
      startBlock: 8122600
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - vFactory
        - vTreasury
      abis:
        - name: NexusV1
          file: ./abis/NexusV1.json
      eventHandlers:
        - event: SpawnedFactory(indexed address,address)
          handler: handleSpawnedFactory
        - event: SpawnedPool(indexed address,address,address,address,address,address)
          handler: handleSpawnedPool
        - event: Initialized(uint256,bytes)
          handler: handleInitialized
      file: ./src/NexusV1.mapping.ts


templates:
  - name: vFactory
    kind: ethereum/contract
    network: goerli
    source:
      abi: vFactoryV1
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      file: ./src/vFactoryV1.mapping.ts
      entities:
        - vFactory
      abis:
        - name: vFactoryV1
          file: ./abis/vFactoryV1.json
      eventHandlers:
        - event: AddedValidators(indexed bytes32,bytes)
          handler: handleAddedValidators
        - event: RemovedValidator(indexed bytes32,bytes,uint256)
          handler: handleRemovedValidator
        - event: UpdatedLimit(indexed bytes32,uint256)
          handler: handleUpdatedLimit
        - event: FundedValidator(indexed bytes32,bytes,uint256,uint256)
          handler: handleFundedValidator
        - event: ExitValidator(indexed uint256)
          handler: handleExitValidator
        - event: ValidatorRequest(indexed bytes32,uint256)
          handler: handleValidatorRequest
        - event: SetValidatorOwner(indexed uint256,address)
          handler: handleSetValidatorOwner
        - event: SetValidatorFeeRecipient(indexed uint256,address)
          handler: handleSetValidatorFeeRecipient
        - event: SetMetadata(string,string,string)
          handler: handleSetMetadata
        - event: SetAdmin(address)
          handler: handleSetAdmin
        - event: ChangedOperator(address)
          handler: handleChangedOperator
        - event: ChangedTreasury(address)
          handler: handleChangedTreasury
        - event: SetMinimalRecipientImplementation(address)
          handler: handleSetMinimalRecipientImplementation
        - event: SetHatcherRegistry(address)
          handler: handleSetHatcherRegistry
        - event: ApproveDepositor(address,bool)
          handler: handleApproveDepositor

  - name: vPool
    kind: ethereum/contract
    network: goerli
    source:
      abi: vPoolV1
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      file: ./src/vPoolV1.mapping.ts
      entities:
        - vPool
      abis:
        - name: vPoolV1
          file: ./abis/vPoolV1.json
      eventHandlers:
        - event: Deposit(indexed address,uint256)
          handler: handleDeposit
        - event: Mint(indexed address,uint256,uint256)
          handler: handleMint
        - event: Burn(address,uint256,uint256)
          handler: handleBurn
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: Approval(indexed address,indexed address,uint256)
          handler: handleApproval
        - event: PurchasedValidators(uint256[])
          handler: handlePurchasedValidators
        - event: RevenueUpdate(uint256,int256,uint256,uint256,uint256)
          handler: handleRevenueUpdate
        - event: SetReportBounds(uint64,uint64,uint64)
          handler: handleSetReportBounds
        - event: SetEpochsPerFrame(uint256)
          handler: handleSetEpochsPerFrame
        - event: SetOperatorFee(uint256)
          handler: handleSetOperatorFee
        - event: SetWithdrawalRecipient(address)
          handler: handleSetWithdrawalRecipient
        - event: SetExecLayerRecipient(address)
          handler: handleSetExecLayerRecipient
        - event: SetCoverageRecipient(address)
          handler: handleSetCoverageRecipient
        - event: SetOracleAggregator(address)
          handler: handleSetOracleAggregator
        - event: ApproveDepositor(address,bool)
          handler: handleApproveDepositor


  - name: vExecLayerRecipient
    kind: ethereum/contract
    network: goerli
    source:
      abi: vExecLayerRecipientV1
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      file: ./src/vExecLayerRecipientV1.mapping.ts
      entities:
        - vExecLayerRecipient
      abis:
        - name: vExecLayerRecipientV1
          file: ./abis/vExecLayerRecipientV1.json
      eventHandlers:
        - event: SuppliedEther(uint256)
          handler: handleSuppliedEther

